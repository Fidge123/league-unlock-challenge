<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/paper-styles/typography.html">

<dom-module id="luc-achievements">
  <template>
    <style>
        :host {
            display: block;
        }
        h1 {
            display: block;
            width: 50%;
        }
    </style>
    <iron-ajax
        id="modeLoader" auto
        url="/api/achievement"
        last-response="{{achievements}}"
        headers="{{header}}"></iron-ajax>
    <h1>Achievements</h1>
    <template is="dom-repeat" items="[[achievements]]">
        <paper-material id="{{index}}" elevation="1">
            <h1>[[item.name]]</h1>
            <p>[[item.description]]</p>
            <p>Points: [[item.points]]</p>
        </paper-material>
    </template>
  </template>

  <script>
    (function() {
      'use strict';

      Polymer({
        is: 'luc-achievements',

        properties: {
            header: {
                type: Object
            },
            achievements: {
                type: Array,
                notifies: true
            }
        },

        getCookie: function (key) {
            var cookieIndex = document.cookie.indexOf(key + "=");
            var endIndex = document.cookie.indexOf(";", cookieIndex);
            endIndex = endIndex < cookieIndex ? document.cookie.length : endIndex;

            if (cookieIndex !== -1) {
                return document.cookie.substring(cookieIndex + key.length + 1, endIndex);
            }
            return "";
        },

        ready: function () {
            this.header = {"Authorization": "Bearer " + this.getCookie("token")};
        }
      });
    })();
  </script>
</dom-module>
